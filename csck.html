<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>Connected Scatterplot Construction Kit</title>
	<style>

		body {
			font: 13px sans-serif;
			width: 1220px;
		}

		rect {
			fill: none;
			pointer-events: all;
		}

		circle,
		line,
		.line {
			fill: none;
			stroke: purple;
			stroke-width: 1.5px;
		}

		circle {
			fill: white;
			cursor: move;
		}

		.line1 {
			stroke: blue;
		}

		.line2 {
			stroke: green;
		}

		.selected {
			fill: #ff7f0e;
			stroke: #ff7f0e;
		}

		div#charts {
			width: 1220px;
			height: 600px;
			margin-bottom: 10px;
		}

		div.chart {
			width: 600px;
			height: 600px;
			float: left;
		}

		div#slider {
			width: 600px;
			clear: left;
			float: left;
			margin-top: 10px;
		}

		line.grid1, line.grid2, line.grid {
			stroke: lightgray;
			stroke-width: 1px;
		}

	</style>
	<script src="d3.v3.min.js"></script>
	<script type="text/javascript" src="csck.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script src="//code.jquery.com/jquery-1.11.0.js"></script>
	<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
</head>
<body>
  <h1>Connected Scatterplot Construction Kit</h1>
  <div id="charts">
    <div id="linechart" class="chart"></div>
    <div id="connectedscatter" class="chart"></div>
    <div id="slider"></div>
  </div>
<div style="clear:left; float:left; margin-top: 10px;">
	<label><input type="checkbox" name="smooth" value="smooth" onclick="toggleSmooth(this);" checked /> Smooth</label>&nbsp;
	<label><input type="checkbox" name="arrows" value="arrows" onclick="toggleArrows(this);" /> Arrows</label>&nbsp;
	<label><input type="checkbox" name="dots" value="dots" onclick="toggleDots(this);" checked /> Dots</label>
	<button type="button" onclick="addSamples();">Add samples</button>&nbsp;
</div>
<div style="float:right;">
	<button type="button" onclick="flipH();">Flip H</button>&nbsp;
	<button type="button" onclick="flipV();">Flip V</button>&nbsp;
	<button type="button" onclick="rotateCW();">Rotate CW</button>&nbsp;
	<button type="button" onclick="rotateCCW();">Rotate CCW</button>
</div>
<div style="clear:both;"></div>


<form>
	<label for="dataset">Dataset:</label>
	<select id="dataset" onchange="loadData(+this.value)">
	</select>
</form>

<!-- Based on <a href="http://bl.ocks.org/mbostock/4342190">Mike Bostock's Spline Editor example</a>. -->

<script type="text/javascript">
	var sliderValue = 0;

	function slide(event, ui) {
		var step = ui.value-sliderValue;
		
		for (var i = points.length - 1; i >= 0; i--) {
		  var nextIndex = (i - step) % points.length;
		  if (nextIndex < 0)
		    nextIndex += points.length;
		  points[i].value3 = points[nextIndex].value2;
		}
		
		for (var i = points.length - 1; i >= 0; i--) {
			points[i].value2 = points[i].value3;
		};

		sliderValue = ui.value;

		redraw(false);
    }

	$('#slider').slider({
      value: 0,
      min: 0,
      max: 50,
      step: 1,
      slide: slide
    });

	d3.json('datasets.json', function (datasetinfo) {
		initialSetup(datasetinfo);
	});
</script>
</body>
</html>
