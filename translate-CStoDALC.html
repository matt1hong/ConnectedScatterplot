<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>Translate Between Charts</title>
	<link rel="stylesheet" type="text/css" href="bootstrap.min.css">
	<link rel="stylesheet" href="csck.css">
	<script src="d3.v3.min.js"></script>
	<script type="text/javascript" src="common.js"></script>
	<script type="text/javascript" src="csck.js"></script>
	<script type="text/javascript" src="queue.min.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script src="//code.jquery.com/jquery-1.11.0.js"></script>
	<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
</head>
<body>
	<div id="charts">
		<div id="connectedscatter" class="chart" style="clear:left;"></div>
		<div class="spacer"><img src="arrow.png" width="95" height="90"></div>
		<div id="linechart" class="chart"></div>
	</div>

	<div class="container">
		<div class="row" style="margin-top:30px;">
			<div class="row">
			<div class="col-sm-offset-10 col-sm-2">
				<button role="button" id="submit" class="btn btn-primary btn-lg btn-block study" onclick="nextStep();">Submit</button>
			</div>
		</div>
	</div>

<script type="text/javascript">

	var studyID = 'cs2dalc';
	var resultID = makeResultID();

	var step = 0;

	var next = false;

	var startTime = new Date().getTime();

	function nextStep() {
		if (next) {
			step += 1;
			if (step < datasets.length) {
				toggleCheatMode(false);
				next = false;
				loadData(step);
				d3.select('#submit').text('Submit').classed('btn-primary', true).classed('btn-success', false);
				startTime = new Date().getTime();
			} else {
				d3.select('#submit').text('Thank You!').classed('btn-danger', true).classed('btn-success', false).on('click', null).attr('disabled', 'disabled');
			}
		} else {
			submitResponse(studyID, resultID+'-'+datasets[step].name, {
				step: step,
				dataset: datasets[step].name,
				time: (new Date()).getTime()-startTime,
				platform: navigator.platform,
				points: pointsDualAxes
			});
			d3.select('#submit').text('Next').classed('btn-primary', false).classed('btn-success', true);
			toggleCheatMode(true);
			next = true;
		}
	}

	if (window.location.hash === '#test') {
		studyID += '-test';
	}


	loadDataSets(true, function() {
		GENERATEDATASETS = false;
		ARROW_FRACTION = .5;

		study = true;
		
		disconnected = true;
		randomizeDALC = true;
		showArrows = true;
		smoothLines = false;
		commonScales = true;
		cheatMode = false;
		interactConnected = false;

		d3.shuffle(datasets);

		initialSetup();
	}, 'translate');



</script>
</body>
</html>
